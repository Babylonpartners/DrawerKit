machine:
  xcode:
    version: "9.0"

dependencies:
  cache_directories:
    - "~/.cocoapods"

test:
  override:
    - set -o pipefail && xcodebuild CODE_SIGNING_REQUIRED=NO CODE_SIGN_IDENTITY=
      PROVISIONING_PROFILE= -sdk iphonesimulator
      -destination 'platform=iOS Simulator,OS=10.3.1,name=iPhone 6s'
      -workspace DrawerKit.xcworkspace -scheme "DrawerKit"
      clean build |
      tee $CIRCLE_ARTIFACTS/xcode_raw.log |
      xcpretty --color --report junit --output $CIRCLE_TEST_REPORTS/xcode/results.xml
